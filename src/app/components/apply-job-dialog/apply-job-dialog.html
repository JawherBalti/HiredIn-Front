<div class="modal-container">
  <div class="modal-header">
    <h2 class="modal-title">
      <mat-icon>work_outline</mat-icon>
      Apply to Job
    </h2>
  </div>

  <div class="modal-content">
    <!-- Error message -->
    <div *ngIf="error" class="alert alert-danger">
      <mat-icon>error_outline</mat-icon>
      {{ error }}
    </div>

    <!-- Success message -->
    <div *ngIf="successMessage" class="alert alert-success">
      <mat-icon>check_circle_outline</mat-icon>
      {{ successMessage }}
    </div>

    <form [formGroup]="applyForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="resume" class="label required">Resume (PDF or DOC)</label>
        <input
          type="file"
          id="resume"
          class="form-control"
          formControlName="resume"
          (change)="onFileSelected($event)"
          accept=".pdf,.doc,.docx"
          [class.is-invalid]="f['resume'].touched && f['resume'].invalid"
        />
        <div class="file-hint">
          <mat-icon>description</mat-icon>
          Upload your resume in PDF or DOC format
        </div>
        <div
          *ngIf="f['resume'].touched && f['resume'].invalid"
          class="invalid-feedback"
        >
          Resume is required
        </div>
      </div>

      <div class="form-group">
        <label for="coverLetter" class="label">Cover Letter (Optional)</label>
        <textarea
          id="coverLetter"
          class="form-control"
          formControlName="coverLetter"
          rows="5"
          placeholder="Write your cover letter here..."
        ></textarea>
        <div class="file-hint">
          <mat-icon>note</mat-icon>
          Add a cover letter to increase your chances
        </div>
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button mat-button class="btn-cancel" (click)="onCancel()">Cancel</button>
    <button
      mat-raised-button
      class="btn-primary"
      (click)="onSubmit()"
      [disabled]="!applyForm.valid || isApplying"
    >
      Submit Application
    </button>
  </div>
</div>
