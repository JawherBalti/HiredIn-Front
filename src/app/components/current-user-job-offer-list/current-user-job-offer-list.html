<section class="jobs-section">
  <h2>
    <button mat-icon-button class="back-button" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    My Job Offers
  </h2>
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-overlay active">
    <div class="spinner"></div>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Job Cards Grid -->
  <div class="jobs-grid">
    <div *ngFor="let job of jobOffers" class="job-card" cdkDrag>
      <div class="job-header">
        <div class="job-badge">{{ job.type }}</div>
        <a [routerLink]="['/job-offers', job.id, 'edit']">
          <mat-icon>edit</mat-icon>
        </a>
      </div>
      <div class="job-content">
        <div class="company-logo">
          <img
            [src]="
              job?.company?.logo_url ||
              'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSlm0t5PrvJkY1Mnh8pMH1l0eTXgTbvLetn7g&s'
            "
            [alt]="job.company?.name + ' logo'"
          />
        </div>
        <div class="job-info">
          <h3>{{ job.title }}</h3>
          <p class="company">{{ job.company?.name }}</p>
          <div class="job-meta">
            <span class="location">
              <mat-icon>location_on</mat-icon>
              {{ job.location }}
            </span>
            <span class="salary">
              <mat-icon>attach_money</mat-icon>
              {{ job.salary || "Negotiable" }}
            </span>
            <span class="deadline" *ngIf="job.deadline">
              <mat-icon>event</mat-icon>
              {{ job.deadline | date }}
            </span>
          </div>
        </div>
      </div>
      <div class="job-footer">
        <span *ngIf="job.created_at" class="posted-date">
          Posted {{ job.created_at | dateAgo }}
        </span>
        <div class="job-actions">
          <button
            mat-stroked-button
            class="view-button"
            [routerLink]="['/job-offers', job.id]"
          >
            View
          </button>
          <button
            mat-stroked-button
            class="view-button"
            [routerLink]="['/jobs', job.id, 'applications']"
          >
            Applications
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- Pagination Controls -->
  <div *ngIf="totalPages > 1" class="pagination-controls">
    <div class="pagination-info">
      {{ paginationInfo }}
    </div>

    <div class="pagination-buttons">
      <button
        mat-stroked-button
        (click)="previousPage()"
        [disabled]="currentPage === 1"
        class="pagination-button"
      >
        Previous
      </button>

      <div class="page-numbers">
        <button
          *ngFor="let page of [].constructor(totalPages); let i = index"
          mat-stroked-button
          (click)="goToPage(i + 1)"
          [class.active]="currentPage === i + 1"
          class="page-button"
        >
          {{ i + 1 }}
        </button>
      </div>

      <button
        mat-stroked-button
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
        class="pagination-button"
      >
        Next
      </button>
    </div>
  </div>
</section>
